{"id":"rYKD","dependencies":[{"name":"/Users/orestes/code/open-source/spotify-web-watcher/package.json","includedInParent":true,"mtime":1588799788042},{"name":"firebase/app","loc":{"line":1,"column":26},"parent":"/Users/orestes/code/open-source/spotify-web-watcher/src/popup-handler.js","resolved":"/Users/orestes/code/open-source/spotify-web-watcher/node_modules/firebase/app/dist/index.cjs.js"},{"name":"firebase/auth","loc":{"line":2,"column":7},"parent":"/Users/orestes/code/open-source/spotify-web-watcher/src/popup-handler.js","resolved":"/Users/orestes/code/open-source/spotify-web-watcher/node_modules/firebase/auth/dist/index.esm.js"},{"name":"../config.js","loc":{"line":4,"column":23},"parent":"/Users/orestes/code/open-source/spotify-web-watcher/src/popup-handler.js","resolved":"/Users/orestes/code/open-source/spotify-web-watcher/config.js"},{"name":"./utils","loc":{"line":5,"column":29},"parent":"/Users/orestes/code/open-source/spotify-web-watcher/src/popup-handler.js","resolved":"/Users/orestes/code/open-source/spotify-web-watcher/src/utils.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.PopupHandler=void 0;var e=o(require(\"firebase/app\"));require(\"firebase/auth\");var t=require(\"../config.js\"),r=require(\"./utils\");function n(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}class i{async signInAnonymously(){e.initializeApp(t.config.firebase);const{user:r}=await e.auth().signInAnonymously();return r.uid}setText(e){document.querySelector(\"input\").setAttribute(\"value\",e)}copyTextFactory(e){return async()=>{await navigator.clipboard.writeText(e)}}async run(){this.setText(\"Getting URL...\");const e=(await(0,r.getStoredValue)(t.config.storageKey))[t.config.storageKey];if(!e)return void this.setText(\"Not configured\");const n=`${t.config.baseUrl}/view/${e}`;this.setText(n);const o=this.copyTextFactory(n);document.querySelector(\"button\").addEventListener(\"click\",o)}}exports.PopupHandler=i;"},"sourceMaps":{"js":{"mappings":[{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":0}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":13}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":20}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":35}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":43}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":56}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":57}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":64}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":68}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":76}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":94}},{"source":"popup-handler.js","original":{"line":1,"column":0},"generated":{"line":1,"column":96}},{"source":"popup-handler.js","original":{"line":1,"column":0},"generated":{"line":1,"column":100}},{"source":"popup-handler.js","original":{"line":1,"column":0},"generated":{"line":1,"column":102}},{"source":"popup-handler.js","original":{"line":1,"column":0},"generated":{"line":1,"column":104}},{"source":"popup-handler.js","original":{"line":1,"column":0},"generated":{"line":1,"column":112}},{"source":"popup-handler.js","original":{"line":2,"column":0},"generated":{"line":1,"column":129}},{"source":"popup-handler.js","original":{"line":2,"column":0},"generated":{"line":1,"column":137}},{"source":"popup-handler.js","original":{"line":4,"column":0},"generated":{"line":1,"column":154}},{"source":"popup-handler.js","original":{"line":4,"column":0},"generated":{"line":1,"column":158}},{"source":"popup-handler.js","original":{"line":4,"column":0},"generated":{"line":1,"column":160}},{"source":"popup-handler.js","original":{"line":4,"column":0},"generated":{"line":1,"column":168}},{"source":"popup-handler.js","original":{"line":5,"column":0},"generated":{"line":1,"column":184}},{"source":"popup-handler.js","original":{"line":5,"column":0},"generated":{"line":1,"column":186}},{"source":"popup-handler.js","original":{"line":5,"column":0},"generated":{"line":1,"column":194}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":205}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":214}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":218}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":221}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":240}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":248}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":255}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":260}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":264}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":266}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":270}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":278}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":285}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":287}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":298}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":305}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":308}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":310}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":319}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":321}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":324}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":327}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":330}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":332}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":343}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":350}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":352}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":355}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":362}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":365}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":382}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":385}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":404}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":406}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":412}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":413}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":421}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":424}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":428}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":430}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":434}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":437}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":440}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":442}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":446}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":449}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":456}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":458}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":462}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":465}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":469}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":471}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":474}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":476}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":483}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":499}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":506}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":531}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":535}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":539}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":544}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":546}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":549}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":556}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":566}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":581}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":586}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":588}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":591}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":592}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":596}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":598}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":600}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":607}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":632}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":634}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":637}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":642}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":646}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":648}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":653}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":655}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":660}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":667}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":682}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":684}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":686}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":689}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":691}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":694}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":696}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":699}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":706}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":708}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":716}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":718}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":721}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":723}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":727}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":729}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":732}},{"source":"popup-handler.js","original":{"line":7,"column":7},"generated":{"line":1,"column":734}},{"source":"popup-handler.js","name":"PopupHandler","original":{"line":7,"column":13},"generated":{"line":1,"column":740}},{"source":"popup-handler.js","name":"signInAnonymously","original":{"line":8,"column":10},"generated":{"line":1,"column":742}},{"source":"popup-handler.js","name":"firebase","original":{"line":9,"column":8},"generated":{"line":1,"column":768}},{"source":"popup-handler.js","name":"initializeApp","original":{"line":9,"column":17},"generated":{"line":1,"column":770}},{"source":"popup-handler.js","name":"config","original":{"line":9,"column":31},"generated":{"line":1,"column":784}},{"source":"popup-handler.js","name":"firebase","original":{"line":9,"column":38},"generated":{"line":1,"column":786}},{"source":"popup-handler.js","name":"firebase","original":{"line":9,"column":38},"generated":{"line":1,"column":793}},{"source":"popup-handler.js","original":{"line":11,"column":14},"generated":{"line":1,"column":803}},{"source":"popup-handler.js","original":{"line":11,"column":14},"generated":{"line":1,"column":809}},{"source":"popup-handler.js","name":"user","original":{"line":11,"column":15},"generated":{"line":1,"column":814}},{"source":"popup-handler.js","name":"firebase","original":{"line":11,"column":29},"generated":{"line":1,"column":823}},{"source":"popup-handler.js","name":"auth","original":{"line":11,"column":38},"generated":{"line":1,"column":825}},{"source":"popup-handler.js","name":"signInAnonymously","original":{"line":11,"column":45},"generated":{"line":1,"column":832}},{"source":"popup-handler.js","name":"user","original":{"line":13,"column":15},"generated":{"line":1,"column":852}},{"source":"popup-handler.js","name":"user","original":{"line":13,"column":15},"generated":{"line":1,"column":859}},{"source":"popup-handler.js","name":"uid","original":{"line":13,"column":20},"generated":{"line":1,"column":861}},{"source":"popup-handler.js","name":"setText","original":{"line":16,"column":4},"generated":{"line":1,"column":865}},{"source":"popup-handler.js","name":"text","original":{"line":16,"column":12},"generated":{"line":1,"column":873}},{"source":"popup-handler.js","name":"document","original":{"line":17,"column":8},"generated":{"line":1,"column":876}},{"source":"popup-handler.js","name":"querySelector","original":{"line":17,"column":17},"generated":{"line":1,"column":885}},{"source":"popup-handler.js","original":{"line":17,"column":31},"generated":{"line":1,"column":899}},{"source":"popup-handler.js","name":"setAttribute","original":{"line":17,"column":40},"generated":{"line":1,"column":908}},{"source":"popup-handler.js","original":{"line":17,"column":53},"generated":{"line":1,"column":921}},{"source":"popup-handler.js","name":"text","original":{"line":17,"column":62},"generated":{"line":1,"column":929}},{"source":"popup-handler.js","name":"copyTextFactory","original":{"line":20,"column":4},"generated":{"line":1,"column":932}},{"source":"popup-handler.js","name":"text","original":{"line":20,"column":20},"generated":{"line":1,"column":948}},{"source":"popup-handler.js","original":{"line":21,"column":15},"generated":{"line":1,"column":951}},{"source":"popup-handler.js","original":{"line":21,"column":15},"generated":{"line":1,"column":958}},{"source":"popup-handler.js","name":"navigator","original":{"line":22,"column":18},"generated":{"line":1,"column":974}},{"source":"popup-handler.js","name":"clipboard","original":{"line":22,"column":28},"generated":{"line":1,"column":984}},{"source":"popup-handler.js","name":"writeText","original":{"line":22,"column":38},"generated":{"line":1,"column":994}},{"source":"popup-handler.js","name":"text","original":{"line":22,"column":48},"generated":{"line":1,"column":1004}},{"source":"popup-handler.js","name":"run","original":{"line":26,"column":10},"generated":{"line":1,"column":1008}},{"source":"popup-handler.js","name":"setText","original":{"line":27,"column":13},"generated":{"line":1,"column":1020}},{"source":"popup-handler.js","name":"setText","original":{"line":27,"column":13},"generated":{"line":1,"column":1025}},{"source":"popup-handler.js","original":{"line":27,"column":21},"generated":{"line":1,"column":1033}},{"source":"popup-handler.js","name":"userId","original":{"line":28,"column":14},"generated":{"line":1,"column":1051}},{"source":"popup-handler.js","name":"userId","original":{"line":28,"column":14},"generated":{"line":1,"column":1057}},{"source":"popup-handler.js","original":{"line":28,"column":30},"generated":{"line":1,"column":1066}},{"source":"popup-handler.js","name":"config","original":{"line":28,"column":45},"generated":{"line":1,"column":1068}},{"source":"popup-handler.js","name":"config","original":{"line":28,"column":45},"generated":{"line":1,"column":1070}},{"source":"popup-handler.js","name":"config","original":{"line":28,"column":45},"generated":{"line":1,"column":1086}},{"source":"popup-handler.js","name":"storageKey","original":{"line":28,"column":52},"generated":{"line":1,"column":1088}},{"source":"popup-handler.js","name":"storageKey","original":{"line":28,"column":52},"generated":{"line":1,"column":1095}},{"source":"popup-handler.js","name":"config","original":{"line":28,"column":65},"generated":{"line":1,"column":1108}},{"source":"popup-handler.js","name":"storageKey","original":{"line":28,"column":72},"generated":{"line":1,"column":1110}},{"source":"popup-handler.js","name":"storageKey","original":{"line":28,"column":72},"generated":{"line":1,"column":1117}},{"source":"popup-handler.js","original":{"line":32,"column":12},"generated":{"line":1,"column":1129}},{"source":"popup-handler.js","name":"userId","original":{"line":32,"column":13},"generated":{"line":1,"column":1133}},{"source":"popup-handler.js","original":{"line":34,"column":12},"generated":{"line":1,"column":1135}},{"source":"popup-handler.js","name":"setText","original":{"line":33,"column":17},"generated":{"line":1,"column":1147}},{"source":"popup-handler.js","name":"setText","original":{"line":33,"column":17},"generated":{"line":1,"column":1152}},{"source":"popup-handler.js","original":{"line":33,"column":25},"generated":{"line":1,"column":1160}},{"source":"popup-handler.js","name":"url","original":{"line":37,"column":14},"generated":{"line":1,"column":1178}},{"source":"popup-handler.js","name":"url","original":{"line":37,"column":14},"generated":{"line":1,"column":1184}},{"source":"popup-handler.js","name":"config","original":{"line":37,"column":23},"generated":{"line":1,"column":1189}},{"source":"popup-handler.js","name":"baseUrl","original":{"line":37,"column":30},"generated":{"line":1,"column":1191}},{"source":"popup-handler.js","name":"baseUrl","original":{"line":37,"column":30},"generated":{"line":1,"column":1198}},{"source":"popup-handler.js","name":"userId","original":{"line":37,"column":46},"generated":{"line":1,"column":1214}},{"source":"popup-handler.js","name":"setText","original":{"line":38,"column":13},"generated":{"line":1,"column":1218}},{"source":"popup-handler.js","name":"setText","original":{"line":38,"column":13},"generated":{"line":1,"column":1223}},{"source":"popup-handler.js","name":"url","original":{"line":38,"column":21},"generated":{"line":1,"column":1231}},{"source":"popup-handler.js","name":"callback","original":{"line":40,"column":14},"generated":{"line":1,"column":1234}},{"source":"popup-handler.js","name":"callback","original":{"line":40,"column":14},"generated":{"line":1,"column":1240}},{"source":"popup-handler.js","original":{"line":40,"column":25},"generated":{"line":1,"column":1242}},{"source":"popup-handler.js","name":"copyTextFactory","original":{"line":40,"column":30},"generated":{"line":1,"column":1247}},{"source":"popup-handler.js","name":"url","original":{"line":40,"column":46},"generated":{"line":1,"column":1263}},{"source":"popup-handler.js","name":"document","original":{"line":41,"column":8},"generated":{"line":1,"column":1266}},{"source":"popup-handler.js","name":"querySelector","original":{"line":41,"column":17},"generated":{"line":1,"column":1275}},{"source":"popup-handler.js","original":{"line":41,"column":31},"generated":{"line":1,"column":1289}},{"source":"popup-handler.js","name":"addEventListener","original":{"line":41,"column":41},"generated":{"line":1,"column":1299}},{"source":"popup-handler.js","original":{"line":41,"column":58},"generated":{"line":1,"column":1316}},{"source":"popup-handler.js","name":"callback","original":{"line":41,"column":67},"generated":{"line":1,"column":1324}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":1328}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":1336}},{"source":"popup-handler.js","original":{"line":7,"column":26},"generated":{"line":1,"column":1349}}],"sources":{"popup-handler.js":"import * as firebase from \"firebase/app\";\nimport \"firebase/auth\";\n\nimport { config } from '../config.js';\nimport {getStoredValue} from \"./utils\";\n\nexport class PopupHandler {\n    async signInAnonymously() {\n        firebase.initializeApp(config.firebase);\n\n        const {user} = await firebase.auth().signInAnonymously();\n\n        return user.uid;\n    };\n\n    setText(text) {\n        document.querySelector('input').setAttribute('value', text);\n    }\n\n    copyTextFactory(text) {\n        return async () => {\n            await navigator.clipboard.writeText(text);\n        };\n    }\n\n    async run() {\n        this.setText('Getting URL...');\n        const userId = (await getStoredValue(config.storageKey))[config.storageKey];\n\n        // TODO: Listen for changes on the stored value and display the URL\n\n        if (!userId) {\n            this.setText('Not configured');\n            return;\n        }\n\n        const url = `${config.baseUrl}/view/${userId}`;\n        this.setText(url);\n\n        const callback = this.copyTextFactory(url);\n        document.querySelector('button').addEventListener('click', callback);\n    }\n}\n\n"},"lineCount":null}},"error":null,"hash":"38e888a3c686db68e5f67b247b6c83d2","cacheData":{"env":{}}}